version: 2

models:
  - name: dim_geo
    description: >
      List of geographical locations of weather stations. Stations changed locations over time, this table reflects these scenarios
  - name: dim_operator
    description: >
      List of operators of weather stations. Stations changed operators over time, this table reflects these scenarios.
  - name: fact_measurements
    description: >
      Mean daily measurements.
      Table contains records of daily measurements. Values are totals, mean-averages, minima and maxima.
      Each measurement has a corresponding quality level (qn3, qn4), with a value of  
    columns:
      - name: measurement_id
        description: Primary key for this table, generated with a concatenation of station_id+dt_measurement
        data_type: string
          tests:
          - unique:
              severity: warn
          - not_null:
              severity: warn
      - name: station_id
        description: A code indicating the weather-station at which the measurements took place 
        data_type: string
        tests:
          - not_null:
              severity: warn
          - relationships:
              to: ref('dim_geo')
              field: station_id
              severity: warn
          - relationships:
              to: ref('dim_operator')
              field: station_id
              severity: warn
      - name: dt_measurement
        description: >
          The time and date at which the measurement was recorded. 
          Some earlier measurements were done manually, so this timestamp may not be perfectly accurate.
        data_type: timestamp
      - name: station_name
        description: The weather-stations' name.
        data_type: string
      - name: operator_name
        description: placeholder
        data_type: string
      - name: station_height_m
        description: placeholder
        data_type: float
      - name: latitude
        description: placeholder
        data_type: string
      - name: longitude
        description: placeholder
        data_type: string
      - name: quality_niveau_3
        description: placeholder
        data_type: integer
      - name: quality_niveau_4
        description: placeholder
        data_type: integer
      - name: max_wind_gust_mps_qn3
        description: placeholder
        data_type: float
      - name: mean_wind_velocity_mps_qn3
        description: placeholder
        data_type: float
      - name: precipitation_heigt_mm_qn4
        description: placeholder
        data_type: float
      - name: precipitation_type_qn4
        description: placeholder
        data_type: integer
        tests:
          - accepted_values:
              values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
              quote: false
      - name: sunshine_duration_h_qn4
        description: placeholder
        data_type: float
      - name: snow_depth_cm_qn4
        description: placeholder
        data_type: integer
      - name: mean_cloud_coverage_qn4
        description: placeholder
        data_type: string      
      - name: mean_vapour_pressure_hpa_qn4
        description: placeholder
        data_type: float
      - name: mean_pressure_hpa_qn4
        description: placeholder
        data_type: float
      - name: mean_temperature_2m_c_qn4
        description: placeholder
        data_type: float
      - name: mean_rel_humidity_qn4
        description: placeholder
        data_type: float
      - name: max_temperature_2m_c_qn4
        description: placeholder
        data_type: float   
      - name: min_temperature_2m_c_qn4
        description: placeholder
        data_type: float
      - name: mean_temperature_5cm_c_qn4
        description: placeholder 
        data_type: float